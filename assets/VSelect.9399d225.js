import{m as E,f as U,V as j}from"./VTextField.4a627311.js";import{m as L,u as M,a as K,V as D}from"./VList.cbcc482f.js";import{m as q}from"./VImg.4f1b5ef8.js";import{f as z}from"./forwardRefs.c003b6b8.js";import{J as H,P as J,ah as G,_ as Q,ag as R,al as W,r as I,g as x,c as P,j as s,F as X,k as C,v as Y,ai as Z}from"./index.0b3b7628.js";import{a as ee,V as le}from"./VMenu.7c25673f.js";import{V as ae}from"./VCheckboxBtn.ec15e4e8.js";import{h as te,i as ne}from"./router.f6657911.js";import{V as oe}from"./VChip.0df7fa6f.js";const ue=H({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:J,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:G},...L({itemChildren:!1})},"v-select"),Ve=Q()({name:"VSelect",props:{...ue(),...R(E({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...q({transition:{component:ee}})},emits:{"update:modelValue":l=>!0,"update:menu":l=>!0},setup(l,T){let{slots:n}=T;const{t:w}=W(),y=I(),r=x(l,"menu"),{items:p,transformIn:B,transformOut:F}=M(l),u=x(l,"modelValue",[],e=>B(Z(e)),e=>{var t;const a=F(e);return l.multiple?a:(t=a[0])!=null?t:null}),k=P(()=>u.value.map(e=>p.value.find(a=>l.valueComparator(a.value,e.value))||e)),g=P(()=>k.value.map(e=>e.props.value)),c=I();function S(e){u.value=[],l.openOnClear&&(r.value=!0)}function _(){l.hideNoData&&!p.value.length||l.readonly||(r.value=!r.value)}function b(e){if(!l.readonly){if(["Enter","ArrowDown"," "].includes(e.key)&&(e.preventDefault(),r.value=!0),["Escape","Tab"].includes(e.key)&&(r.value=!1),e.key==="ArrowDown"){var a;(a=c.value)==null||a.focus("next")}else if(e.key==="ArrowUp"){var t;e.preventDefault(),(t=c.value)==null||t.focus("prev")}else if(e.key==="Home"){var d;e.preventDefault(),(d=c.value)==null||d.focus("first")}else if(e.key==="End"){var v;e.preventDefault(),(v=c.value)==null||v.focus("last")}}}function V(e){if(l.multiple){const a=g.value.findIndex(t=>t===e.value);if(a===-1)u.value=[...u.value,e];else{const t=[...u.value];t.splice(a,1),u.value=t}}else u.value=[e],r.value=!1}function O(e){var a;(a=c.value)!=null&&a.$el.contains(e.relatedTarget)||(r.value=!1)}function N(e){if(e.relatedTarget==null){var a;(a=y.value)==null||a.focus()}}return te(()=>{const e=!!(l.chips||n.chip),[a]=U(l);return s(j,C({ref:y},a,{modelValue:u.value.map(t=>t.props.value).join(", "),"onUpdate:modelValue":t=>{t==null&&(u.value=[])},validationValue:u.externalValue,dirty:u.value.length>0,class:["v-select",{"v-select--active-menu":r.value,"v-select--chips":!!l.chips,[`v-select--${l.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length}],appendInnerIcon:l.menuIcon,readonly:!0,"onClick:clear":S,"onClick:control":_,onBlur:O,onKeydown:b}),{...n,default:()=>{var t,d,v;return s(X,null,[s(le,C({modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,activator:"parent",contentClass:"v-select__content",eager:l.eager,openOnClick:!1,closeOnContentClick:!1,transition:l.transition},l.menuProps),{default:()=>[s(K,{ref:c,selected:g.value,selectStrategy:l.multiple?"independent":"single-independent",onMousedown:o=>o.preventDefault(),onFocusout:N},{default:()=>{var o;return[!p.value.length&&!l.hideNoData&&((o=(t=n["no-data"])==null?void 0:t.call(n))!=null?o:s(D,{title:w(l.noDataText)},null)),(d=n["prepend-item"])==null?void 0:d.call(n),p.value.map((i,h)=>{var f;var m;return(f=(m=n.item)==null?void 0:m.call(n,{item:i,index:h,props:C(i.props,{onClick:()=>V(i)})}))!=null?f:s(D,C({key:h},i.props,{onClick:()=>V(i)}),{prepend:$=>{let{isSelected:A}=$;return l.multiple&&!l.hideSelected?s(ae,{modelValue:A,ripple:!1},null):void 0}})}),(v=n["append-item"])==null?void 0:v.call(n)]}})]}),k.value.map((o,i)=>{function h(f){f.stopPropagation(),f.preventDefault(),V(o)}const m={"onClick:close":h,modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:o.value,class:"v-select__selection"},[e?s(ne,{defaults:{VChip:{closable:l.closableChips,size:"small",text:o.title}}},{default:()=>[n.chip?n.chip({item:o,index:i,props:m}):s(oe,m,null)]}):n.selection?n.selection({item:o,index:i}):s("span",{class:"v-select__selection-text"},[o.title,l.multiple&&i<k.value.length-1&&s("span",{class:"v-select__selection-comma"},[Y(",")])])])})])}})}),z({menu:r,select:V},y)}});export{Ve as V,ue as m};
